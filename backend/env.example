PORT=3001

# Environment: development | test | production
ENVIRONMENT=development

# CORS (comma-separated string or JSON array). Vite default origin is http://localhost:5173
CORS_ORIGINS=["http://localhost:5173"]

# Database (Postgres + SQLAlchemy async)
DATABASE_URL=postgresql+asyncpg://postgres:postgres@127.0.0.1:5433/classmate

# JWT / cookies (placeholder values; change in prod)
JWT_SECRET=dev-change-me
JWT_ACCESS_TTL_SECONDS=900
JWT_REFRESH_TTL_SECONDS=1209600

# Cookie options
ACCESS_COOKIE_NAME=access_token
REFRESH_COOKIE_NAME=refresh_token
REFRESH_COOKIE_PATH=/api/v1/auth
COOKIE_SECURE=false
COOKIE_DOMAIN=
COOKIE_SAMESITE=lax

# CSRF (double-submit cookie)
CSRF_ENABLED=true
CSRF_COOKIE_NAME=csrf_token
CSRF_HEADER_NAME=X-CSRF-Token
CSRF_COOKIE_PATH=/
CSRF_COOKIE_SAMESITE=lax

# LLM api keys
GEMINI_API_KEY=
GOOGLE_API_KEY=

# LLM model + chat behavior
GEMINI_MODEL=gemini-2.5-flash
CHAT_TEMPERATURE=0.0
CHAT_HISTORY_MAX_MESSAGES=12

# Telemetry / tracing (dev-friendly defaults)
# Chroma telemetry can be noisy; this disables anonymous telemetry.
ANONYMIZED_TELEMETRY=false
# LangChain tracing/telemetry (off by default for local dev).
LANGCHAIN_TRACING_V2=false
LANGCHAIN_TELEMETRY=false

# RAG (core)
RAG_ENABLED=true
RAG_STORE_DIR=.rag_store
RAG_TOP_K=4
RAG_CHUNK_SIZE=1200
RAG_CHUNK_OVERLAP=200
RAG_EMBEDDING_MODEL=models/embedding-001

# RAG (embeddings)
RAG_EMBEDDINGS_PROVIDER=gemini
RAG_LOCAL_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# S3 uploads (presigned)
S3_ENDPOINT_URL=
S3_REGION=us-east-1
S3_BUCKET=classmate-dev
S3_ACCESS_KEY_ID=access-id
S3_SECRET_ACCESS_KEY=access-key
S3_PRESIGN_EXPIRES_SECONDS=900
S3_DOWNLOAD_EXPIRES_SECONDS=300

# Presign window for extracted audio URLs used by Runpod.
# Must be long enough for the full transcription job + retries.
S3_AUDIO_PRESIGN_EXPIRES_SECONDS=3600

# Max upload size (bytes). Keep high for video uploads.
UPLOAD_MAX_SIZE_BYTES=104857600

# ffmpeg (used for extracting audio from uploaded videos)
FFMPEG_BIN=ffmpeg
# Thumbnail capture (seconds into the video to grab a frame)
THUMBNAIL_SEEK_SECONDS=1.0

# Runpod serverless (faster-whisper)
# You will use these in PR3 (transcription).
RUNPOD_API_KEY=
RUNPOD_ENDPOINT_ID=
RUNPOD_POLL_INTERVAL_SECONDS=2.0
RUNPOD_TIMEOUT_SECONDS=600
# Use /runsync for simplest integration (true), or /run + poll (false).
RUNPOD_USE_RUNSYNC=true
# Default model passed to the standard faster-whisper worker.
RUNPOD_WHISPER_MODEL=base
